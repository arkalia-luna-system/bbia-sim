<section class="w-full">
    <div class="app-section">
        <div class="app-section-title">Quick Actions</div>

        <!-- Grille de 15 boutons emoji -->
        <div class="grid grid-cols-5 gap-3 mt-4">
            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="happy" title="Heureux">ğŸ˜Š</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="sad" title="Triste">ğŸ˜¢</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="confused" title="Confus">ğŸ˜•</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="surprised" title="Surpris">ğŸ˜®</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="angry" title="En colÃ¨re">ğŸ˜ </button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="cool" title="Cool">ğŸ•¶ï¸</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="curious" title="Curieux">ğŸ¤”</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-action="wave" title="Saluer">ğŸ‘‹</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-action="pray" title="Prier">ğŸ™</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-action="sleep" title="Dormir">ğŸ˜´</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-emotion="excited" title="ExcitÃ©">ğŸ‰</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-action="dance" title="Danser">ğŸ­</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-action="art" title="Art">ğŸ¨</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-action="party" title="FÃªte">ğŸª</button>

            <button
                class="quick-action-btn p-4 rounded-lg bg-white border border-gray-200 hover:scale-105 hover:shadow-md transition-all duration-200 text-3xl"
                data-action="movie" title="Film">ğŸ¬</button>
        </div>
    </div>
</section>

<script>
    // Gestion des Quick Actions
    document.addEventListener('DOMContentLoaded', () => {
        const buttons = document.querySelectorAll('.quick-action-btn');

        buttons.forEach(button => {
            button.addEventListener('click', async () => {
                const emotion = button.getAttribute('data-emotion');
                const action = button.getAttribute('data-action');

                // Animation visuelle
                button.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    button.style.transform = '';
                }, 150);

                // Envoyer commande via API REST
                try {
                    if (emotion) {
                        console.log(`Ã‰motion: ${emotion}`);
                        const response = await fetch('/api/motion/emotion', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                emotion: emotion,
                                intensity: 0.8, // IntensitÃ© par dÃ©faut pour quick actions
                            }),
                        });
                        if (response.ok) {
                            const data = await response.json();
                            console.log('âœ… Ã‰motion dÃ©finie:', data);
                            // Feedback visuel
                            button.style.backgroundColor = '#4CAF50';
                            setTimeout(() => {
                                button.style.backgroundColor = '';
                            }, 500);
                        } else {
                            console.error('âŒ Erreur dÃ©finition Ã©motion:', response.statusText);
                            button.style.backgroundColor = '#F44336';
                            setTimeout(() => {
                                button.style.backgroundColor = '';
                            }, 500);
                        }
                    } else if (action) {
                        console.log(`Action: ${action}`);
                        // Mapper les actions aux comportements BBIA
                        const behaviorMap = {
                            wave: 'greeting',
                            pray: 'pray',
                            sleep: 'sleep',
                            dance: 'dance',
                            art: 'art',
                            party: 'party',
                            movie: 'movie',
                        };
                        const behavior = behaviorMap[action] || action;
                        const response = await fetch(
                            `/api/ecosystem/behaviors/execute?behavior=${behavior}&intensity=1.0`,
                            {
                                method: 'POST',
                            },
                        );
                        if (response.ok) {
                            const data = await response.json();
                            console.log('âœ… Comportement exÃ©cutÃ©:', data);
                            // Feedback visuel
                            button.style.backgroundColor = '#4CAF50';
                            setTimeout(() => {
                                button.style.backgroundColor = '';
                            }, 500);
                        } else {
                            console.error('âŒ Erreur exÃ©cution comportement:', response.statusText);
                            button.style.backgroundColor = '#F44336';
                            setTimeout(() => {
                                button.style.backgroundColor = '';
                            }, 500);
                        }
                    }
                } catch (error) {
                    console.error('âŒ Erreur lors de l\'envoi de la commande:', error);
                    button.style.backgroundColor = '#F44336';
                    setTimeout(() => {
                        button.style.backgroundColor = '';
                    }, 500);
                }
            });
        });
    });
</script>