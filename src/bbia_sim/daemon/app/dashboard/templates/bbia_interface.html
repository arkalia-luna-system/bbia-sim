<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BBIA OS - Live Interface</title>
    <style>
        :root {
            --bbia-white: #f0f0f0;
            --bbia-dark: #1a1a1a;
            --bbia-blue: #00e5ff;
            --bbia-eye: #000;
            --eye-reflection: rgba(255, 255, 255, 0.8);
        }

        body {
            background-color: #0f172a;
            /* Fond sombre style Arkalia */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        /* Container principal */
        .bbia-container {
            position: relative;
            width: 400px;
            height: 500px;
        }

        /* --- STYLES SVG --- */
        svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        #body-shell {
            fill: var(--bbia-white);
            filter: drop-shadow(0 0 10px rgba(0, 229, 255, 0.2));
        }

        #head-group {
            transform-origin: 250px 250px;
            /* Point de pivot pour la tête */
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            /* Mouvement fluide et élastique */
        }

        #head-case {
            fill: var(--bbia-white);
            stroke: #e0e0e0;
            stroke-width: 2;
        }

        .eye-bg {
            fill: var(--bbia-eye);
        }

        .pupil {
            fill: var(--bbia-blue);
            transition: all 0.2s ease;
        }

        /* Antennes */
        .antenna-line {
            stroke: #888;
            stroke-width: 3;
        }

        .antenna-ball {
            fill: #888;
        }

        /* Animation de respiration (Idle) */
        @keyframes breathe {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        .breathing {
            animation: breathe 4s ease-in-out infinite;
        }

        /* Animation de rotation HUD */
        @keyframes spin {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }

        /* --- HUD GRAPHIQUE (Décor) --- */
        .hud-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px dashed rgba(0, 229, 255, 0.3);
            border-radius: 50%;
            pointer-events: none;
        }

        /* --- BOUTONS DE CONTROLE (Pour tester) --- */
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            z-index: 10;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            background: rgba(0, 229, 255, 0.1);
            border: 1px solid var(--bbia-blue);
            color: var(--bbia-blue);
            padding: 10px 20px;
            cursor: pointer;
            font-family: monospace;
            transition: 0.3s;
            border-radius: 4px;
        }

        button:hover {
            background: rgba(0, 229, 255, 0.3);
            transform: scale(1.05);
        }

        button.active {
            background: rgba(0, 229, 255, 0.5);
            box-shadow: 0 0 10px rgba(0, 229, 255, 0.5);
        }

        /* Status text */
        .status-text {
            color: var(--bbia-blue);
            font-size: 14px;
            opacity: 0.7;
            margin-top: 10px;
        }
    </style>
</head>

<body>

    <div class="hud-circle" style="width: 450px; height: 450px; animation: spin 20s linear infinite;"></div>
    <div class="hud-circle" style="width: 300px; height: 300px; border-style: solid; opacity: 0.1;"></div>

    <div class="bbia-container">
        <svg viewBox="0 0 500 500" id="bbia-svg">
            <path id="body-shell" d="M150 300 C 150 300, 130 480, 250 480 C 370 480, 350 300, 350 300 L 150 300 Z" />

            <rect x="235" y="270" width="30" height="40" fill="#AAA" />

            <g id="head-group" class="breathing">
                <line x1="180" y1="180" x2="160" y2="100" class="antenna-line" id="ant-left" />
                <circle cx="160" cy="100" r="5" class="antenna-ball" />
                <line x1="320" y1="180" x2="340" y2="100" class="antenna-line" id="ant-right" />
                <circle cx="340" cy="100" r="5" class="antenna-ball" />

                <rect id="head-case" x="130" y="180" width="240" height="140" rx="35" />

                <line x1="200" y1="250" x2="300" y2="250" stroke="#111" stroke-width="10" />

                <g id="eye-left-group">
                    <circle cx="200" cy="250" r="35" class="eye-bg" />
                    <circle cx="200" cy="250" r="15" class="pupil" id="pupil-left" />
                    <circle cx="210" cy="240" r="6" fill="white" opacity="0.6" />
                </g>

                <g id="eye-right-group">
                    <circle cx="300" cy="250" r="35" class="eye-bg" />
                    <circle cx="300" cy="250" r="15" class="pupil" id="pupil-right" />
                    <circle cx="310" cy="240" r="6" fill="white" opacity="0.6" />
                </g>
            </g>

            <text x="250" y="490" text-anchor="middle" fill="#00e5ff" font-size="14" opacity="0.7"
                id="status-text">STATUS: ONLINE</text>
        </svg>
    </div>

    <div class="controls">
        <button onclick="bbia.setMood('neutral')" id="btn-neutral">Neutre</button>
        <button onclick="bbia.setMood('happy')" id="btn-happy">Joyeux</button>
        <button onclick="bbia.setMood('curious')" id="btn-curious">Curieux</button>
        <button onclick="bbia.setMood('listening')" id="btn-listening">Écoute</button>
        <button onclick="bbia.setMood('sleep')" id="btn-sleep">Veille</button>
        <button onclick="bbia.setMood('error')" id="btn-error">Erreur</button>
    </div>

    <div class="status-text" id="mood-status">Mode: Neutre</div>

    <script>
        // --- LE CERVEAU DE BBIA (JS) ---
        class BbiaController {
            constructor() {
                this.head = document.getElementById('head-group');
                this.pupilL = document.getElementById('pupil-left');
                this.pupilR = document.getElementById('pupil-right');
                this.antLeft = document.getElementById('ant-left');
                this.antRight = document.getElementById('ant-right');
                this.statusText = document.getElementById('status-text');
                this.moodStatus = document.getElementById('mood-status');
                this.currentMood = 'neutral';

                // Lancer le clignement des yeux automatique
                this.startBlinking();

                // Initialiser avec le mode neutre
                this.setMood('neutral');
            }

            setMood(mood) {
                this.currentMood = mood;

                // Reset styles
                this.head.style.transform = 'rotate(0deg)';
                this.pupilL.style.fill = 'var(--bbia-blue)';
                this.pupilR.style.fill = 'var(--bbia-blue)';
                this.pupilL.setAttribute('r', '15');
                this.pupilR.setAttribute('r', '15');
                this.pupilL.setAttribute('cx', '200');
                this.pupilR.setAttribute('cx', '300');
                this.pupilL.style.opacity = '1';
                this.pupilR.style.opacity = '1';

                // Mettre à jour les boutons actifs
                document.querySelectorAll('.controls button').forEach(btn => {
                    btn.classList.remove('active');
                });
                const btnId = `btn-${mood}`;
                const btn = document.getElementById(btnId);
                if (btn) btn.classList.add('active');

                switch (mood) {
                    case 'neutral':
                        this.head.style.transform = 'rotate(0deg)';
                        this.statusText.textContent = 'STATUS: ONLINE';
                        this.moodStatus.textContent = 'Mode: Neutre';
                        break;

                    case 'happy':
                        this.head.style.transform = 'rotate(-5deg) translateY(-5px)';
                        // Simuler des yeux rieurs en dilatant légèrement
                        this.pupilL.setAttribute('r', '18');
                        this.pupilR.setAttribute('r', '18');
                        this.statusText.textContent = 'STATUS: HAPPY';
                        this.moodStatus.textContent = 'Mode: Joyeux';
                        break;

                    case 'curious':
                        this.head.style.transform = 'rotate(-25deg)'; // La "Reachy Tilt" classique
                        this.pupilL.setAttribute('cx', '205'); // Regarde sur le côté
                        this.pupilR.setAttribute('cx', '305');
                        this.statusText.textContent = 'STATUS: THINKING';
                        this.moodStatus.textContent = 'Mode: Curieux';
                        break;

                    case 'listening':
                        this.head.style.transform = 'rotate(5deg)';
                        this.pupilL.style.fill = '#00FF00'; // Vert quand il écoute
                        this.pupilR.style.fill = '#00FF00';
                        this.statusText.textContent = 'STATUS: LISTENING';
                        this.moodStatus.textContent = 'Mode: Écoute';
                        break;

                    case 'sleep':
                        this.head.style.transform = 'rotate(10deg) translateY(20px)'; // Tête basse
                        this.pupilL.setAttribute('r', '2'); // Yeux presque fermés
                        this.pupilR.setAttribute('r', '2');
                        this.pupilL.style.fill = '#555';
                        this.pupilR.style.fill = '#555';
                        this.statusText.textContent = 'STATUS: STANDBY';
                        this.moodStatus.textContent = 'Mode: Veille';
                        break;

                    case 'error':
                        this.head.style.transform = 'rotate(10deg) translateY(20px)'; // Tête basse
                        this.pupilL.style.fill = '#FF0000'; // Yeux rouges
                        this.pupilR.style.fill = '#FF0000';
                        this.statusText.textContent = 'STATUS: ERROR';
                        this.moodStatus.textContent = 'Mode: Erreur';
                        break;
                }
            }

            startBlinking() {
                setInterval(() => {
                    // Ne pas cligner si en mode sleep ou error
                    if (this.currentMood === 'sleep' || this.currentMood === 'error') {
                        return;
                    }

                    // Fermer
                    this.pupilL.style.opacity = 0.1;
                    this.pupilR.style.opacity = 0.1;

                    // Ouvrir après 150ms
                    setTimeout(() => {
                        this.pupilL.style.opacity = 1;
                        this.pupilR.style.opacity = 1;
                    }, 150);
                }, 4000 + Math.random() * 2000); // Clignement aléatoire entre 4 et 6 sec
            }
        }

        // Initialisation
        const bbia = new BbiaController();

        // Exposer globalement pour contrôle externe (Python, etc.)
        window.bbia = bbia;
    </script>
</body>

</html>