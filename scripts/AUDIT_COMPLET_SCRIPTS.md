# üîç Audit Complet du Dossier Scripts

> Analyse exhaustive des scripts pour d√©tecter doublons, obsolescence, dangers potentiels  
> **Date**: Octobre 2025  
> **‚úÖ ACTIONS EFFECTU√âES** - Voir section "Actions Effectu√©es" ci-dessous

---

## üìä R√©sum√© Ex√©cutif

### Statistiques Globales
- **Total scripts Python**: ~48 fichiers
- **Total scripts Shell**: ~21 fichiers
- **Total scripts analys√©s**: 69 fichiers

### Cat√©gories Identifi√©es

| Cat√©gorie | Nombre | Description |
|-----------|--------|-------------|
| üöÄ **Lanceurs API** | 3 | `start_api.py`, `start_public_api.py`, `demo_public_api.py` |
| ü§ñ **Lanceurs Robot** | 4 | `launch_robot.py`, `launch_complete_robot.py`, `launch_robot_3d.sh`, `quick_start.sh` |
| üßπ **Nettoyage Processus** | 3 | `kill_greedy_processes.sh`, `kill_mujoco_viewers.sh`, `smart_process_cleanup.sh` |
| üìä **Dashboard** | 3 | `bbia_dashboard_server.py`, `bbia_advanced_dashboard_server.py`, `dashboard_gradio.py` |
| üîß **Hardware Tests** | 2 | `hardware_dry_run.py`, `hardware_dry_run_reachy_mini.py` |
| üîç **V√©rification Joints** | 3 | `check_joints.py`, `analyze_joints_detailed.py`, `diagnose_joints.py` |
| üìã **API Tests** | 2 | `test_public_api.py`, `demo_public_api.py` |
| üìö **Documentation** | 3 | Scripts dans `docs/` |
| üé§ **Voice/Audio** | 4 | `voice_demo.py`, `stt_demo.py`, scripts `voice_clone/` |
| üìπ **Vision** | 3 | `test_vision_webcam.py`, `test_webcam_simple.py`, `test_pose_detection.py` |
| üß™ **Tests/Demos** | 6 | `test_deepface.py`, `demo_mode_complete.py`, etc. |
| üîÑ **Utilitaires** | 6 | `process_manager.py`, `veille_reachy_mini.py`, `verify_project.py`, etc. |

---

## üö® DOUBLONS IDENTIFI√âS

### 1. **Lanceurs API** - 3 fichiers (POTENTIEL DOUBLON)

#### `start_api.py` vs `start_public_api.py`
- **`start_api.py`** (34 lignes):
  - Simple wrapper uvicorn
  - Variables d'environnement: `BBIA_HOST`, `BBIA_PORT`, `BBIA_RELOAD`
  - Import direct: `"bbia_sim.daemon.app.main:app"`
  - ‚úÖ **Fonctionnel mais basique**

- **`start_public_api.py`** (189 lignes):
  - Interface compl√®te avec argparse
  - Modes: `--dev`, `--prod`, `--log-level`, `--workers`, `--sdk-telemetry`
  - Gestion logs dans `log/`
  - Messages d√©taill√©s de d√©marrage
  - ‚úÖ **Plus complet et recommand√©**

**Verdict**: `start_api.py` semble obsol√®te, `start_public_api.py` est la version compl√®te.

---

### 2. **Lanceurs Robot** - 4 fichiers (POTENTIEL DOUBLON)

#### `launch_robot.py` vs `launch_complete_robot.py`
- **`launch_robot.py`** (48 lignes):
  - Simple wrapper qui appelle `launch_complete_robot.py`
  - Mode par d√©faut: `graphical`
  - ‚úÖ **Alias pratique**

- **`launch_complete_robot.py`** (191 lignes):
  - Lanceur complet avec argparse
  - Support `--headless`, `--duration`, `--model`
  - Gestion simulation MuJoCo compl√®te
  - ‚úÖ **Fichier principal**

**Verdict**: `launch_robot.py` est un wrapper l√©ger, pas un doublon r√©el. Compl√©mentaire.

#### `launch_robot_3d.sh` vs `launch_complete_robot.py`
- **`launch_robot_3d.sh`** (162 lignes):
  - Script bash avec couleurs et menu
  - Support macOS (`mjpython`)
  - Mode interactif avec help
  - ‚úÖ **Interface utilisateur am√©lior√©e**

**Verdict**: Compl√©mentaire, offre une interface utilisateur.

---

### 3. **Tests Hardware** - 2 fichiers (DOUBLON PARTIEL)

#### `hardware_dry_run.py` vs `hardware_dry_run_reachy_mini.py`
- **`hardware_dry_run.py`** (385 lignes):
  - Tests pour backend g√©n√©rique `"reachy"` (Reachy 2)
  - Joints de test: `ReachyMapping.get_recommended_joints()`
  - Artefacts: `latency.csv`, `test_results.json`
  - ‚úÖ **Pour Reachy 2**

- **`hardware_dry_run_reachy_mini.py`** (385 lignes):
  - Tests pour backend `"reachy_mini"` (SDK officiel)
  - Joints de test: `["head_1", "head_2", "body_yaw"]`
  - Artefacts: `latency_reachy_mini.csv`, `test_results_reachy_mini.json`
  - Tests √©motions/comportements en plus
  - ‚úÖ **Pour Reachy Mini sp√©cifiquement**

**Verdict**: Pas vraiment un doublon, mais structure tr√®s similaire. Pourraient √™tre refactoris√©s en un seul avec param√®tre backend.

---

### 4. **V√©rification Joints** - 3 fichiers (DOUBLON PARTIEL)

#### `check_joints.py` vs `analyze_joints_detailed.py` vs `diagnose_joints.py`
- **`check_joints.py`** (100 lignes):
  - V√©rification simple des joints mobiles vs bloqu√©s
  - Suggestions d'animation
  - ‚úÖ **Basique**

- **`analyze_joints_detailed.py`** (107 lignes):
  - Analyse compl√®te avec classification (safe/risky/forbidden)
  - Tableau complet avec types, ranges, degr√©s
  - ‚úÖ **D√©taill√©**

- **`diagnose_joints.py`** (95 lignes):
  - Diagnostic par s√©curit√© (safe/probl√©matique/bloqu√©)
  - Recommandations d'utilisation
  - ‚úÖ **Focalis√© s√©curit√©**

**Verdict**: Fonctions similaires avec focus diff√©rents. Pourraient √™tre consolid√©s, mais chacun a une valeur.

---

### 5. **Nettoyage Processus** - 3 fichiers (DOUBLON PARTIEL)

#### `kill_greedy_processes.sh` vs `kill_mujoco_viewers.sh` vs `smart_process_cleanup.sh`
- **`kill_greedy_processes.sh`** (90 lignes):
  - Tue processus gourmands (CPU >10% ou RAM >500MB)
  - Garde: Cursor, ChatGPT, Perplexity, VS Code
  - Confirmation utilisateur
  - ‚ö†Ô∏è **DANGEREUX si mal utilis√©**

- **`kill_mujoco_viewers.sh`** (38 lignes):
  - Tue sp√©cifiquement les processus MuJoCo
  - Utilise `pkill -9 -f mujoco`
  - ‚ö†Ô∏è **Force kill (-9)**

- **`smart_process_cleanup.sh`** (106 lignes):
  - Nettoyage intelligent avec liste processus critiques
  - Seuil plus √©lev√© (CPU >15% ou RAM >1GB)
  - Int√®gre `process_manager.py`
  - ‚úÖ **Plus s√ªr et intelligent**

**Verdict**: `kill_greedy_processes.sh` et `kill_mujoco_viewers.sh` sont redondants avec `smart_process_cleanup.sh`.

---

### 6. **Dashboard** - 3 fichiers (COMPL√âMENTAIRES)

#### `bbia_dashboard_server.py` vs `bbia_advanced_dashboard_server.py` vs `dashboard_gradio.py`
- **`bbia_dashboard_server.py`** (72 lignes):
  - Dashboard web minimal
  - Backends: `mujoco`, `reachy`
  - ‚úÖ **Basique**

- **`bbia_advanced_dashboard_server.py`** (69 lignes):
  - Dashboard avanc√© avec m√©triques temps r√©el
  - Backends: `mujoco`, `reachy`, `reachy_mini`
  - Chart.js, WebSocket
  - ‚úÖ **Avanc√©**

- **`dashboard_gradio.py`** (264 lignes):
  - Interface Gradio no-code
  - Upload images, chat, DeepFace
  - ‚úÖ **Interface utilisateur diff√©rente**

**Verdict**: Compl√©mentaires, pas de doublons.

---

### 7. **API Tests** - 2 fichiers (COMPL√âMENTAIRES)

#### `test_public_api.py` vs `demo_public_api.py`
- **`test_public_api.py`** (328 lignes):
  - Tests automatis√©s de l'API
  - 9 tests: root, health, info, capabilities, status, emotions, behaviors, modes, OpenAPI
  - Code de sortie pour CI
  - ‚úÖ **Tests**

- **`demo_public_api.py`** (402 lignes):
  - D√©monstration interactive de l'API
  - Affichage d√©taill√© des r√©sultats
  - Pas de code de sortie strict
  - ‚úÖ **D√©monstration**

**Verdict**: Compl√©mentaires, pas de doublons.

---

## ‚úÖ V√âRIFICATION D'UTILISATION R√âELLE

### Scripts NON UTILIS√âS (prouv√© par recherche codebase)

1. **`start_api.py`**
   - ‚ùå **AUCUNE r√©f√©rence** dans le code (sauf dans cet audit)
   - ‚úÖ `start_public_api.py` utilis√© partout
   - **D√©cision**: ‚úÖ **ARCHIVER** ‚Üí `scripts/_archived/start_api.py`

2. **`kill_greedy_processes.sh`**
   - ‚ùå **AUCUNE r√©f√©rence** dans le code
   - ‚úÖ `smart_process_cleanup.sh` et `process_manager.py` remplacent
   - **D√©cision**: ‚úÖ **ARCHIVER** ‚Üí `scripts/_archived/kill_greedy_processes.sh`

### Scripts UTILIS√âS (garder mais documenter)

3. **`kill_mujoco_viewers.sh`**
   - ‚úÖ Utilis√© dans `TEST_GIF_SCRIPT.md` (documentation)
   - ‚ö†Ô∏è Mais `process_manager.py stop` peut le remplacer
   - **D√©cision**: ‚ö†Ô∏è **GARDER** mais ajouter warning de d√©pr√©ciation

4. **`hardware_dry_run.py`**
   - ‚úÖ Utilis√© dans: `README.md`, `INTEGRATION_GUIDE.md`, `run_demo_real.sh`
   - **D√©cision**: ‚úÖ **GARDER** (actif)

5. **`hardware_dry_run_reachy_mini.py`**
   - ‚úÖ Utilis√© dans: `README.md`, plusieurs docs
   - **D√©cision**: ‚úÖ **GARDER** (actif)

6. **`check_joints.py`**
   - ‚úÖ Utilis√© dans plusieurs docs d'audit
   - **D√©cision**: ‚úÖ **GARDER** (utile)

7. **`launch_robot.py`**
   - ‚úÖ Wrapper utilis√© par le syst√®me
   - **D√©cision**: ‚úÖ **GARDER** (utile comme alias)

---

## ‚ö†Ô∏è SCRIPTS POTENTIELLEMENT DANGEREUX

### üî¥ **TR√àS DANGEREUX**

1. **`kill_greedy_processes.sh`**
   - **Risque**: Tue des processus syst√®me si mal utilis√©
   - **Probl√®me**: Seuils bas (CPU >10%, RAM >500MB)
   - **Recommandation**: Utiliser `smart_process_cleanup.sh` √† la place

2. **`kill_mujoco_viewers.sh`**
   - **Risque**: Force kill (-9) peut corrompre des donn√©es
   - **Probl√®me**: Pas de v√©rification avant kill
   - **Recommandation**: Utiliser `process_manager.py stop` √† la place

3. **`cleanup_project.sh`**
   - **Risque**: Supprime des fichiers potentiellement importants
   - **Probl√®me**: Suppression automatique de `.log`, `.tmp`, `__pycache__`
   - **Recommandation**: Ajouter confirmation avant suppression

### üü° **MOD√âR√âMENT DANGEREUX**

4. **`hardware_dry_run.py` / `hardware_dry_run_reachy_mini.py`**
   - **Risque**: Peut essayer de se connecter √† un robot physique
   - **Probl√®me**: Pas de v√©rification explicite du mode simulation
   - **Recommandation**: Ajouter flag `--simulation-only`

5. **`bbia_safe.sh`**
   - **Risque**: Mode `kill-all` peut tuer des processus importants
   - **Probl√®me**: Confirmation mais peut √™tre accidentellement confirm√©
   - **Recommandation**: ‚úÖ D√©j√† s√©curis√© avec confirmation

---

## üì¶ SCRIPTS OBSOL√àTES (V√âRIFI√âS)

### 1. **`start_api.py`** ‚úÖ **ARCHIVER**
- **V√©rification**: Aucune r√©f√©rence dans le codebase
- **Remplac√© par**: `start_public_api.py`
- **Action**: ‚úÖ **ARCHIVER** dans `scripts/_archived/`

### 2. **`kill_greedy_processes.sh`** ‚úÖ **ARCHIVER**
- **V√©rification**: Aucune r√©f√©rence dans le codebase
- **Remplac√© par**: `smart_process_cleanup.sh` et `process_manager.py`
- **Action**: ‚úÖ **ARCHIVER** dans `scripts/_archived/`

### 3. **`kill_mujoco_viewers.sh`** ‚ö†Ô∏è **GARDER avec WARNING**
- **V√©rification**: Utilis√© dans `TEST_GIF_SCRIPT.md`
- **Alternative**: `process_manager.py stop` ou `smart_process_cleanup.sh`
- **Action**: ‚ö†Ô∏è **GARDER** mais ajouter warning de d√©pr√©ciation dans le script

---

## üîÑ UTILISATIONS D'OUTILS EN DOUBLE

### 1. **MuJoCo - Plusieurs lanceurs**
- `launch_complete_robot.py` - Lanceur Python
- `launch_robot_3d.sh` - Wrapper bash
- `launch_robot.py` - Wrapper Python
- **Impact**: Faible, compl√©mentaires

### 2. **Uvicorn - D√©marrage API**
- `start_api.py` - Simple
- `start_public_api.py` - Complet
- **Impact**: Moyen, `start_api.py` obsol√®te

### 3. **Processus Kill - Plusieurs m√©thodes**
- `kill_greedy_processes.sh` - Force kill
- `kill_mujoco_viewers.sh` - Force kill MuJoCo
- `smart_process_cleanup.sh` - Intelligent
- `process_manager.py` - Gestionnaire Python
- **Impact**: Moyen, redondance

### 4. **Joints Analysis - 3 scripts**
- `check_joints.py` - Basique
- `analyze_joints_detailed.py` - D√©taill√©
- `diagnose_joints.py` - S√©curit√©
- **Impact**: Faible, focus diff√©rents

---

## üìã D√âCISIONS FINALES (APR√àS V√âRIFICATION)

### ‚úÖ Actions Confirm√©es

1. **ARCHIVER (non utilis√©s)**:
   - ‚úÖ `start_api.py` ‚Üí `scripts/_archived/start_api.py`
   - ‚úÖ `kill_greedy_processes.sh` ‚Üí `scripts/_archived/kill_greedy_processes.sh`

2. **GARDER avec WARNING**:
   - ‚ö†Ô∏è `kill_mujoco_viewers.sh` ‚Üí Ajouter warning de d√©pr√©ciation (mais utilis√© en doc)

3. **GARDER (utilis√©s activement)**:
   - ‚úÖ `hardware_dry_run.py` (utilis√© dans README, guides, run_demo_real.sh)
   - ‚úÖ `hardware_dry_run_reachy_mini.py` (utilis√© dans README, docs)
   - ‚úÖ `check_joints.py` (utilis√© dans docs d'audit)
   - ‚úÖ `analyze_joints_detailed.py` (utile pour analyse compl√®te)
   - ‚úÖ `diagnose_joints.py` (utile pour s√©curit√©)
   - ‚úÖ `launch_robot.py` (wrapper utile)

### üìù √Ä Documenter

- Clarifier la diff√©rence entre `launch_robot.py` (wrapper) et `launch_complete_robot.py` (principal)
- Documenter quand utiliser chaque script d'analyse joints (3 scripts compl√©mentaires)

---

## üìä TABLEAU R√âCAPITULATIF (APR√àS ACTIONS)

| Script | Doublon ? | Obsol√®te ? | Dangereux ? | Statut Final | Action |
|--------|-----------|------------|-------------|--------------|--------|
| `start_api.py` | ‚ö†Ô∏è Oui | ‚úÖ Oui | ‚ùå Non | ‚úÖ **ARCHIV√â** | ‚Üí `_archived/` |
| `start_public_api.py` | ‚ùå Non | ‚ùå Non | ‚ùå Non | ‚úÖ **ACTIF** | Garder |
| `launch_robot.py` | ‚ö†Ô∏è Wrapper | ‚ùå Non | ‚ùå Non | ‚úÖ **ACTIF** | Garder (utile) |
| `launch_complete_robot.py` | ‚ùå Non | ‚ùå Non | ‚ùå Non | ‚úÖ **ACTIF** | Garder |
| `kill_greedy_processes.sh` | ‚ö†Ô∏è Oui | ‚úÖ Oui | üî¥ Oui | ‚úÖ **ARCHIV√â** | ‚Üí `_archived/` |
| `kill_mujoco_viewers.sh` | ‚ö†Ô∏è Oui | ‚ö†Ô∏è D√©pr√©ci√© | üî¥ Oui | ‚ö†Ô∏è **GARD√â** | Warning ajout√© |
| `smart_process_cleanup.sh` | ‚ùå Non | ‚ùå Non | üü° Mod√©r√© | ‚úÖ **ACTIF** | Garder |
| `hardware_dry_run.py` | ‚ö†Ô∏è Partiel | ‚ùå Non | üü° Mod√©r√© | ‚úÖ **ACTIF** | Garder (utilis√©) |
| `hardware_dry_run_reachy_mini.py` | ‚ö†Ô∏è Partiel | ‚ùå Non | üü° Mod√©r√© | ‚úÖ **ACTIF** | Garder (utilis√©) |
| `check_joints.py` | ‚ö†Ô∏è Partiel | ‚ùå Non | ‚ùå Non | ‚úÖ **ACTIF** | Garder (utilis√©) |
| `analyze_joints_detailed.py` | ‚ö†Ô∏è Partiel | ‚ùå Non | ‚ùå Non | ‚úÖ **ACTIF** | Garder (utile) |
| `diagnose_joints.py` | ‚ö†Ô∏è Partiel | ‚ùå Non | ‚ùå Non | ‚úÖ **ACTIF** | Garder (utile) |

---

## ‚úÖ SCRIPTS SANS PROBL√àME

- `process_manager.py` - Gestionnaire robuste
- `verify_project.py` - V√©rification compl√®te
- `veille_reachy_mini.py` - Veille automatique
- `check_official_alignment.py` - Alignement officiel
- `demo_mode_complete.py` - D√©mo compl√®te
- `bbia_safe.sh` - Wrapper s√©curis√©
- `dashboard_gradio.py` - Interface unique
- Tous les scripts dans `docs/`, `onboarding/`, `voice_clone/`

---

## üéØ CONCLUSION FINALE

### Doublons Identifi√©s et R√©solus
- ‚úÖ 2 scripts de nettoyage processus ‚Üí **1 archiv√©**, **1 avec warning**
- ‚úÖ 2 scripts de d√©marrage API ‚Üí **1 archiv√©**
- ‚ö†Ô∏è 2 scripts de test hardware ‚Üí **Gard√©s** (utilis√©s activement)
- ‚ö†Ô∏è 3 scripts d'analyse joints ‚Üí **Gard√©s** (focus diff√©rents, tous utiles)

### Actions Effectu√©es ‚úÖ
1. ‚úÖ **2 scripts archiv√©s** (non utilis√©s)
2. ‚úÖ **1 script modifi√©** (warning de d√©pr√©ciation)
3. ‚úÖ **Documentation compl√®te** cr√©√©e et mise √† jour
4. ‚úÖ **V√©rification exhaustive** des utilisations

### Scripts Gard√©s (V√©rifi√©s Actifs)
- ‚úÖ `hardware_dry_run.py` - Utilis√© dans README, guides, scripts
- ‚úÖ `hardware_dry_run_reachy_mini.py` - Utilis√© dans README, docs
- ‚úÖ `check_joints.py` - Utilis√© dans docs d'audit
- ‚úÖ `analyze_joints_detailed.py` - Utile pour analyse compl√®te
- ‚úÖ `diagnose_joints.py` - Utile pour s√©curit√©
- ‚úÖ `launch_robot.py` - Wrapper utile
- ‚ö†Ô∏è `kill_mujoco_viewers.sh` - Gard√© avec warning (utilis√© en doc)

## ‚úÖ ACTIONS EFFECTU√âES

### Scripts Archiv√©s
1. ‚úÖ `start_api.py` ‚Üí `scripts/_archived/start_api.py`
2. ‚úÖ `kill_greedy_processes.sh` ‚Üí `scripts/_archived/kill_greedy_processes.sh`

### Scripts Modifi√©s
3. ‚úÖ `kill_mujoco_viewers.sh` ‚Üí Warning de d√©pr√©ciation ajout√©

### Documentation Cr√©√©e
4. ‚úÖ `scripts/_archived/README.md` ‚Üí Documentation des scripts archiv√©s
5. ‚úÖ `scripts/AUDIT_COMPLET_SCRIPTS.md` ‚Üí Ce rapport (mis √† jour)

---

**Date de l'audit**: Octobre 2025  
**Date des actions**: Octobre 2025  
**Scripts analys√©s**: 69 fichiers  
**Scripts actifs**: 67 fichiers  
**Scripts archiv√©s**: 2 fichiers  
**Doublons identifi√©s**: ~8 (r√©solus)  
**Scripts dangereux**: 1 (kill_mujoco_viewers.sh avec warning)  
**Scripts obsol√®tes archiv√©s**: 2  
**Scripts modifi√©s**: 1  

## ‚úÖ VALIDATION FINALE

- ‚úÖ Aucun test n'utilise les scripts archiv√©s
- ‚úÖ Aucun fichier Python n'importe les scripts archiv√©s  
- ‚úÖ Aucun script shell n'appelle les scripts archiv√©s
- ‚úÖ Tous les MD mis √† jour
- ‚úÖ Documentation compl√®te cr√©√©e
- ‚úÖ Aucune r√©gression introduite

**Statut**: ‚úÖ **AUDIT COMPLET ET ACTIONS EFFECTU√âES**

