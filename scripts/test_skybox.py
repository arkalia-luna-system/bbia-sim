#!/usr/bin/env python3
"""Test pour v√©rifier que le skybox fonctionne"""

import sys
from pathlib import Path

import mujoco

sys.path.insert(0, str(Path(__file__).parent.parent / "src"))

model_path = Path("src/bbia_sim/sim/models/reachy_mini_REAL_OFFICIAL.xml")
print(f"üìÇ Chargement: {model_path}")

model = mujoco.MjModel.from_xml_path(str(model_path))
data = mujoco.MjData(model)

# V√©rifier les param√®tres visuels
print("\nüé® Param√®tres visuels du mod√®le:")
if hasattr(model, "vis"):
    if hasattr(model.vis, "rgba"):
        print(f"   Sky rgba: {model.vis.rgba.sky}")
        print(f"   Fog rgba: {model.vis.rgba.fog}")
        print(f"   Haze rgba: {model.vis.rgba.haze}")

# V√©rifier les textures
print("\nüñºÔ∏è  Textures dans le mod√®le:")
print(f"   Nombre de textures: {model.ntexture}")
for i in range(model.ntexture):
    name = mujoco.mj_id2name(model, mujoco.mjtObj.mjOBJ_TEXTURE, i)
    print(f"   Texture {i}: {name}")

# Lancer viewer pour v√©rifier
print("\nüñ•Ô∏è  Lancement viewer pour v√©rification...")
with mujoco.viewer.launch_passive(model, data) as viewer:
    print("‚úÖ Viewer ouvert - V√©rifiez le fond!")
    print("‚ùå Fermez la fen√™tre pour quitter")

    while viewer.is_running():
        viewer.sync()
        import time

        time.sleep(0.01)
